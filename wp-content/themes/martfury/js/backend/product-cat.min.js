jQuery(document).ready(function(e){"use strict";function a(a){var t=e("#mf-custom-elements");"0"==a?t.hide():(t.show(),t.find(".mf-custom-elements").hide(),t.find("#mf-custom-elements-"+a).show())}var t,n=e("#mf_cat_banners_id"),i=e("#mf_cat_banners_link"),r=e("#mf_cat_banners"),o=r.find(".mf-cat-images");r.on("click",".upload_images_button",function(a){var i=e(this);a.preventDefault(),t?t.open():((t=wp.media.frames.downloadable_file=wp.media({multiple:!0})).on("select",function(){var e=t.state().get("selection"),a=n.val();e.map(function(e){if((e=e.toJSON()).id){a=a?a+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;o.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" width="100px" height="100px" /><ul class="actions"><li><a href="#" class="delete" title="'+i.data("delete")+'">'+i.data("text")+"</a></li></ul></li>")}}),n.val(a)}),t.open())}),o.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,a){a.item.css("background-color","#f6f6f6")},stop:function(e,a){a.item.removeAttr("style")},update:function(){var a="";o.find("li.image").css("cursor","default").each(function(){var t=e(this).attr("data-attachment_id");a=a+t+","}),n.val(a)}}),r.on("click","a.delete",function(){e(this).closest("li.image").remove();var a="";return o.find("li.image").css("cursor","default").each(function(){var t=e(this).attr("data-attachment_id");a=a+t+","}),n.val(a),!1});var s,l=e("#mf_cat_banners_2_id"),c=e("#mf-cat-banners_2_link"),d=e("#mf_cat_banners-2"),f=d.find(".mf-cat-image");l.val()||d.find(".remove_banner_2_button").hide(),d.on("click",".upload_banner_2_button",function(e){e.preventDefault(),s?s.open():((s=wp.media.frames.downloadable_file=wp.media({multiple:!1})).on("select",function(){var e=s.state().get("selection").first().toJSON();if(e.id){var a=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;l.val(e.id),d.find(".remove_banner_2_button").show(),f.attr("src",a)}}),s.open())}),d.on("click",".remove_banner_2_button",function(){var a=d.data("rel");return f.attr("src",a),l.val(""),e(this).hide(),!1}),e(document).ajaxComplete(function(e,a,t){if(a&&4===a.readyState&&200===a.status&&t.data&&0<=t.data.indexOf("action=add-tag")){var o=wpAjax.parseAjaxResponse(a.responseXML,"ajax-response");if(!o||o.errors)return;return r.find("li.image").remove(),n.val(""),i.val(""),l.val(""),c.val(""),f.attr("src",d.data("rel")),void d.find(".remove_banner_2_button").hide()}}),e("#mf_cat_layout").on("change",function(){a(e(this).val())}).trigger("change");var m=e(".mf-cat-banners-group"),u=e(".mf-cat-banners-2-group");e("#parent").on("change",function(){var t=e("#mf_cat_layout").val();if("-1"!=e(this).val()){a(t),m.hide();var n=e(this).find("option:selected").attr("class");console.log(n),"level-0"==n||void 0===n?u.show():u.hide()}else m.show(),u.show(),a(t)}).trigger("change")});